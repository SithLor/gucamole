(function(n){})(window.jsdapi=window.jsdapi||{});
(function(n){function t(a,b,d){if(a.url){var c=new XMLHttpRequest,h=a.url+r(a.query);c.open(a.method,h,!0);if("arraybuffer"===a.responseType||"binaryToBase64"===a.responseType)c.responseType="arraybuffer";else if("blob"===a.responseType||"binary"===a.responseType)c.responseType="blob";if(b)for(let f in b)b.hasOwnProperty(f)&&b[f]&&c.setRequestHeader(f,b[f]);a.accessToken&&c.setRequestHeader("Authorization","Bearer "+a.accessToken);a.contentType&&c.setRequestHeader("Content-Type",a.contentType);c.onreadystatechange=
function(){if(4===c.readyState){let k=null,e=3===d.length?c.getAllResponseHeaders():null;if(200===c.status||a.ignoreStatusCode)if("json"===a.responseType)try{k=JSON.parse(c.responseText)}catch(g){Logger.instance.error("could not parse json data:",g)}else k="blob"===a.responseType||"arraybuffer"===a.responseType||"binary"===a.responseType?c.response:"binaryToBase64"===a.responseType?u(c.response):c.responseText;if(e){let g=e.split("\n");e={};for(let p=0;p<g.length;p++){var f=g[p];let q=f.indexOf(":");
if(0<=q){let v=f.substr(0,q).trim();f=f.substr(q+1).trim();e[v]=f}}}setTimeout(function(){3===d.length?m(d,k,c.status,e):m(d,k,c.status)},0)}};c.onerror=function(f){Logger.instance.error(`Error occurred on XHR (${a.url}):`,f);m(d,void 0,-1)};c.ontimeout=function(){Logger.instance.error(`Timeout occurred on XHR (${a.url})`);m(d,void 0,-2)};a.content?c.send(a.content):c.send()}else m(d,null,10)}var l={};n.setup=function(a){if(a&&a.headers)for(let b in a.headers)a.headers.hasOwnProperty(b)&&a.headers[b]&&
(l[b]=a.headers[b])};n.sendRequestAsync=function(a){const b=a.headers||{};for(var d in l)l.hasOwnProperty(d)&&!b.hasOwnProperty(d)&&(b[d]=l[d]);d=a.url+r(a.query);let c={method:a.method,headers:{}};if(b)for(let h in b)b.hasOwnProperty(h)&&b[h]&&(c.headers[h]=b[h]);a.accessToken&&(c.headers.Authorization=`Bearer ${a.accessToken}`);a.contentType&&(c.headers["Content-Type"]=a.contentType);return fetch(d,c)};n.sendRequest=function(a,b){const d=a.headers||{};for(const c in l)l.hasOwnProperty(c)&&!d.hasOwnProperty(c)&&
(d[c]=l[c]);t(a,d,b)};let r=function(a){let b="";if(void 0!==a&&null!==a)for(let d in a)a.hasOwnProperty(d)&&(b=""===b?"?":b+"&",b=b+encodeURIComponent(d)+"="+encodeURIComponent(a[d]));return b},u=function(a){let b="";a=new Uint8Array(a);var d=a.byteLength;let c=d%3;d-=c;let h,f,k;for(let g=0;g<d;g+=3){var e=a[g]<<16|a[g+1]<<8|a[g+2];h=(e&16515072)>>18;f=(e&258048)>>12;k=(e&4032)>>6;e&=63;b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[h]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f]+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[k]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e]}1==c?(e=a[d],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(e&252)>>2]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(e&3)<<4]+"=="):2==c&&(e=a[d]<<8|a[d+1],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(e&64512)>>10]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(e&1008)>>
4]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(e&15)<<2]+"=");return b},m=function(a){if(a)try{a.apply(this,[].slice.call(arguments).splice(1))}catch(b){Logger.instance.error(b)}}})(window.jsdapi.http=window.jsdapi.http||{});
