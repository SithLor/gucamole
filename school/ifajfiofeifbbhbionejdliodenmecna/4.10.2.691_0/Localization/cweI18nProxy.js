function i18nProxy(){this.m_port=null;this.m_promises=new Map;return this}i18nProxy.prototype.__initialize=function(b){this.m_port=b;this.m_port.onMessage.addListener(a=>{if(a.message===window.dji.messages.cwe.i18n.TRANSLATE_TEXT){var c=this.m_promises.get(a.messageId);c&&(this.m_promises.delete(a.messageId),c.resolve(a.translatedText))}})};i18nProxy.instance=null;
i18nProxy.initialize=function(b){if(null===i18nProxy.instance)try{i18nProxy.instance=new i18nProxy,i18nProxy.instance.__initialize(b)}catch(a){i18nProxy.instance=null,Logger.instance.error(a)}};
i18nProxy.prototype.getMessage=async function(b){var a=this.m_promises.get(b);if(a)return a.promise;a=new Promise((f,d)=>{if(this.m_port){var e=this.m_promises.get(b);e?(e.resolve=f,e.reject=d):this.m_promises.set(b,{promise:null,resolve:f,reject:d});this.m_port.postMessage({message:window.dji.messages.cwe.i18n.TRANSLATE_TEXT,messageId:b})}else d()});const c=this.m_promises.get(b);c&&!c.promise&&(c.promise=a);return a};window.dji=window.dji||{};window.dji.cwe=window.dji.cwe||{};
window.dji.cwe.i18n=i18nProxy;
