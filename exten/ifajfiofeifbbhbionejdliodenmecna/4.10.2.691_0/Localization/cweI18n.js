function CWEI18n(){this.supportedLangs=["en","fr"];this.defaultLang="en";this.customLang=null;this.translations={};return this}CWEI18n.prototype.__initialize=async function(a){this.customLang=a||this.__getSupportedLanguage();await this.__loadTranslations()};CWEI18n.instance=null;
CWEI18n.initialize=async function(){if(null===CWEI18n.instance)try{CWEI18n.instance=new CWEI18n,await CWEI18n.instance.__initialize()}catch(a){CWEI18n.instance=null,Logger.instance.error("CWEI18N - cannot create instance!"),Logger.instance.error(a)}};
CWEI18n.prototype.__loadTranslations=async function(){const a=chrome.runtime.getManifest().web_accessible_resources.filter(b=>b.startsWith("Localization/Languages"));for(let b=0;b<this.supportedLangs.length;b+=1){const d=this.supportedLangs[b];var c=a.filter(e=>e.endsWith(`${d}.json`));c=await fetch(chrome.runtime.getURL(c[0]));this.translations[d]=await c.json()}};
CWEI18n.prototype.__getSupportedLanguage=function(){const a=chrome.i18n.getUILanguage().split("_")[0];return this.supportedLangs.includes(a)?a:this.defaultLang};CWEI18n.prototype.getLanguage=function(){return CWEI18n.instance.customLang};CWEI18n.prototype.setCustomLanguage=function(a){this.supportedLangs.includes(a.toLowerCase())?CWEI18n.instance.customLang=a.toLowerCase():CWEI18n.instance.customLang="en"};
CWEI18n.prototype.getMessage=function(a){return this.translations[this.customLang][a]?.message||this.translations[this.defaultLang][a]?.message||""};window.dji=window.dji||{};window.dji.cwe=window.dji.cwe||{};window.dji.cwe.i18n=CWEI18n;
