class Options{constructor(){this.inputs=document.getElementsByTagName("input"),this.saveBtn=document.getElementById("save"),this.config=null,this.run()}run(){this.initStorage().then((t=>{this.config=t.config||{},this.showHotkeys(),this.initListeners(),this.setShortCutsState(),this.setGoogleAppsState()}))}setShortCutsState(){let t=document.querySelector("input[type=checkbox].shortcuts");t.addEventListener("click",(function(){chrome.storage.local.set({IsShortCutsShow:t.checked})}))}setGoogleAppsState(){let t=document.querySelector("input[type=checkbox].apps");t.addEventListener("click",(function(){chrome.storage.local.set({IsAppsShow:t.checked})}))}initStorage(){return new Promise(((t,e)=>{chrome.storage.local.get((e=>{t(e)}))}))}showHotkeys(){for(let t=0;t<this.inputs.length;t++){let e=this.inputs[t];e.addEventListener("keyup",(t=>this.validateInput(t))),e.addEventListener("focus",(function(){this.select()})),this.config.hotkeys&&this.config.hotkeys[e.id]&&(e.value=this.config.hotkeys[e.id])}}validateInput(t){let e=t.target.value.toUpperCase().replace(/([^0-9A-Z])/g,"");for(let s=0;s<this.inputs.length;s++){let i=this.inputs[s];i!==t.target&&i.value===e&&(e="")}t.target.value=e,this.config.hotkeys&&this.config.hotkeys[t.target.id]===t.target.value||this.removeClass(this.saveBtn,"hide")}initListeners(){this.initDOMListeners()}initDOMListeners(){this.saveBtn.addEventListener("click",(t=>this.saveChanges()))}saveChanges(){this.config.hotkeys=this.config.hotkeys||{};for(let t=0;t<this.inputs.length;t++){let e=this.inputs[t];e.value?this.config.hotkeys[e.id]=e.value:delete this.config.hotkeys[e.id]}chrome.storage.local.set({config:this.config},(()=>{this.addClass(this.saveBtn,"hide")}))}addClass(t,e){t.className.indexOf(e)>=0||(t.className=t.className+" "+e)}removeClass(t,e){t.className=t.className.replace(new RegExp("\\b"+e+"\\b","g"),"")}}const optionsPage=new Options;